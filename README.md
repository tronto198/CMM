# 고양이 마리오 메이커

프로젝트 소개
----------------

유저가 맵을 직접 만들고, 수정하고 그 맵을 플레이 할 수 있는 게임
유저는 마우스를 이용해 맵을 직접 만들거나 수정할 수 있고, 이는 map_list 폴더에 파일로 저장된다.
맵 제작을 시작하면 캐릭터와 직접적으로 부딪히는 블럭과, 장식물, 움직이는 몬스터를 배치하거나, bgm과 배경을 지정할 수 있다.
맵의 끝에 다다르는 것이 게임을 클리어하는 목표이지만, 맵 제작자는 각종 함정이나 트릭을 이용해 이를 방해할 수 있다.

이후 유저는 이런 형식의 맵들 중 하나를 로드해 직접 플레이어가 될 수 있다.
게임 내에서는 키보드를 이용해 고양이 형태의 캐릭터를 직접 움직이며, 제작자가 설치한 각종 함정과 트릭을 피하며 맵의 끝에 다다르는 것이 게임의 목표이다.

스크린샷
---------------



비하인드
-----------------

1학년 여름 클래스도 모를때 C#을 처음 배우고 그래픽 처리를 조금 해보다가 그대로 만들어버린 프로젝트
 - 그래서 프로젝트 폴더 이름이 sample
 - 개발 기간은 C#을 배우는 것부터 시작하여 약 3주
 - 첫 프로젝트이고, 클래스라는 것도 모르던 시절에 만든 프로젝트라 코드 읽기가 너무 힘들어 수정이 불가능...

처음 만들었는데 나름 만족할 성과를 보자, 이를 제대로 만들고 싶어서 몇번을 새로운 프로젝트로 시작했지만 새로운 문제들이 튀어나와 번번이 실패했다. 하지만 이것이 바탕이 되어 여러 프로젝트를 진행하는데 많은 도움이 되었다.

게임의 원판은 한국에서는 '고양이 마리오'라고 알려져 있는 게임이며 리소스 역시 이 게임에서 따왔다.


사용한 기술
-----------------

타이머를 이용해 일정한 시간마다 화면에 그래픽 요소를 그린다. 이때 GDIBuffer 객체를 이용해 더블버퍼링 기법을 사용한다.
- 맵에 표시되어야 할 모든 요소는 GDIBuffer의 bitmap 객체에 자신에게 정해진 그래픽을 그린다.
- 모든 요소를 GDIBuffer의 bitmap객체에 그린 이후에 GDIBuffer의 bitmap객체를 활용해 화면을 한번에 그린다.


다른 타이머를 이용해 일정 시간마다 모든 요소들의 위치와 상태를 계산한다.
- 먼저 키 입력의 상황을 체크해 캐릭터가 다음 프레임에 이동할 위치를 계산한다.
- 모든 요소들에 대해 캐릭터와 충돌하는지 여부를 확인한다.
- 만약 충돌한다면 충돌한 요소에 따라 정해진 상호작용을 수행한다.

맵의 모든 구성 요소는 텍스트파일에 일정한 규칙에 따라 저장한다.

bgm은 api를 사용해 재생한다.

맵 제작시에는 마우스 클릭 이벤트의 좌표를 가져와 요소를 배치한다.
